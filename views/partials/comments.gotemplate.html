{{ define "comments" }}
<div class="card">
    <div class="card-header">Comments</div>
    <div class="card-body">
        {{ if .UserEmail }}
        <form class="pure-form pure-form-stacked" action="/comment/{{.Path}}" method="POST">
            <fieldset>
                <p>Commenting as <strong>{{ .UserEmail }}</strong></p>

                <label for="content">Comment</label>
                <textarea id="content" name="content" class="pure-input-1" rows="3" placeholder="Write a comment..." required></textarea>

                <button type="submit" class="pure-button pure-button-primary">
                    Send
                </button>
            </fieldset>
        </form>
        {{ else }}
        <p><a href="/login">Log in with Google</a> to leave a comment.</p>
        {{ end }}
    </div>
</div>

{{range .Comments}}
<div class="comment-item">
    <div class="comment-user">{{.User}}</div>
    <div class="comment-content">{{.Content}}</div>
    <div class="comment-when">{{.When}}</div>
</div>
{{else}}
<p class="no-comments">No comments yet.</p>
{{end}}
{{ end }}